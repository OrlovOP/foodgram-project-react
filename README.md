### Данные для проверки.
- DNS адрес: foodgram53.hopto.org
- IP-адрес сервера: 158.160.30.121
- Логин администратора: olav@yandex.ru
- Пароль администратора: 12345

******************************************************************
# Проект Foodgram.

## Описание проекта.
    Проект Foodgram - сайт для любителей готовить.
    Всем кто любит готовить, делиться и обмениваться рецептами это сайт
    будет очень интересен и полезен.
    Тут авторизованные пользователи могут публиковать свои рецепты, просматривать
    рецепты других пользователей. Понравившиеся рецепты можно доавлять и
    раздел "Избанное", подписываться на любимых авторов рецептов, формировать
    список покупок для приготовления понравившегося блюда.

## Технологии в проекте.
    - Python
    - Django
    - Django REST Framework
    - Docker
    - Postgres
    - Nginx

## Как развернуть проект Foodgram локально.

1. Клонировать репозиторий из Github на локальный компьютер.
   ``` git clone git@github.com:OrlovOP/foodgram-project-react.git```

2. Создать и активировать виртуальное окружение.
    ```python -m venv venv```
    * Активировать виртуальное окружение
        Если у Вас Линукс или Мак, то ```source venv/bin/activate ```
        Если у Вас Виндоуз, то ```source venv/scripts/activate```

3. Установить программные зависимости.
    ```python -m pip install```
    ```pip install -r requirements.txt```

4. Выполнить миграции для базы данных.
    ```python manage.py migrate```

5. Запустить проект.
    ``` python manage.py runserver```


## Как запустить проект на боевом сервере.

1. Установить на сервере програмную платформу Docker и Docker-compose.
    Выполнить на сервере следующие команды:
    ``` sudo apt update
        sudo apt install curl ```

    С помощью утилиты curl скачайте скрипт для установки Docker.
    ```curl -fSL https://get.docker.com -o get-docker.sh```
    
    Запустите сохранённый скрипт с правами суперпользователя.
    ```sudo sh ./get-docker.sh ```
    
    Далее установите утилиту Docker-compose.
    ```sudo apt-get install docker-compose-plugin```

2. Создайте на сервере папку foodgram и foodgram/infra.
    В папку infra скопируйте файлы:
    - docker-compose.production.yml
    - nginnx.conf

3. В репозиторий Github в раздел Settings - Secrets and variables вносим
    данные пользователя и параметры для подключения к серверу.
    ```
    DOCKER_PASSWORD= # Пароль на DockerHub
    DOCKER_USERNAME= # Username на DockerHub
    HOST= # IP сервера
    USER= # Логин на удалённом сервере
    SSH_KEY= # SSH-key компьютера, с которого будет происходить подключение к удалённому серверу
    SSH_PASSPHRASE= #Кодовая фраза для SSH
    TELEGRAM_TO= #ID пользователя Telegram
    TELEGRAM_TOKEN= #ID бота Telegram
    ```
4. Для запуска процессов развёртывания проекта на сервере выполните
    команду: ```git push``` в своём IDE локального компьютера.
    Эта команда запустит процессы workflow на сервере Github.

5. После успешного выполения процессов workflow, выполняем команды,
    завершающие установку.
    - выполняем миграцию структуры базы данных:
        ```sudo docker-compose exec backend python manage.py migrate ```
    - создаём суперпользователя:
    ```sudo docker-compose exec -it backend python manage.py createsuperuser```

## В API доступны следующие эндпоинты:

* ```/api/users/```  Get-запрос – получение списка пользователей. 
                     POST-запрос – регистрация нового пользователя.

* ```/api/users/{id}``` GET-запрос – страница пользователя с указанным id.

* ```/api/users/me/``` GET-запрос – страница текущего пользователя. 
                       PATCH-запрос – редактирование собственной страницы. 
                       (Доступно авторизированным пользователям). 

* ```/api/users/set_password``` POST-запрос – изменение собственного пароля. 
                                (Доступно авторизированным пользователям). 

* ```/api/auth/token/login/``` POST-запрос – получение токена.

* ```/api/auth/token/logout/``` POST-запрос – удаление токена. 

* ```/api/tags/``` GET-запрос — получение списка  тегов.

* ```/api/tags/{id}``` GET-запрос — получение тега о его id. 

* ```/api/ingredients/``` GET-запрос – получение списка всех ингредиентов. 

* ```/api/ingredients/{id}/``` GET-запрос — получение информации об ингредиенте по его id.

* ```/api/recipes/``` GET-запрос – получение списка всех рецептов. 
                      POST-запрос – добавление нового рецепта. (доступно для авторизированных пользователей).

* ```/api/recipes/{id}/``` GET-запрос – получение информации о рецепте. 
                           PATCH-запрос – изменение рецепта (доступно для автора рецепта). 
                           DELETE-запрос – удаление собственного рецепта (доступно для автора рецепта).                      

* ```/api/recipes/{id}/favorite/``` POST-запрос – добавить рецепт в Избранное. 
                                    (Доступно для авторизированных пользователей).

* ```/api/recipes/{id}/favorite/``` POST-запрос – добавление нового рецепта в избранное. 
                                    DELETE-запрос – удаление рецепта из избранного. 
                                    (Доступно для авторизированных пользователей). 

* ```/api/recipes/{id}/shopping_cart/``` POST-запрос – добавление нового рецепта в список покупок. 
                                        DELETE-запрос – удаление рецепта из списка покупок. 
                                        (Доступно для авторизированных пользователей). 

* ```/api/recipes/download_shopping_cart/``` GET-запрос – получение текстового файла со списком покупок.
                                            (Доступно для авторизированных пользователей). 

* ```/api/users/{id}/subscribe/``` GET-запрос – подписка на пользователя по его id. 
                                   POST-запрос – отписка от пользователя по его id. 
                                   (Доступно для авторизированных пользователей).

* ```/api/users/subscriptions/``` GET-запрос – получение списка всех пользователей, 
                                    на которых подписан текущий пользователь. 
                                    (Доступно для авторизированных пользователей). 

### Автор проекта

Студент курса Python-разработчик Олег Орлов.

2023